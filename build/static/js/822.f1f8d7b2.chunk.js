"use strict";(self.webpackChunkdongshihui_frontend=self.webpackChunkdongshihui_frontend||[]).push([[822],{822:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var n=r(9950),s=r(9808),i=r(2053),a=r(899),o=r(8089),c=r(704),l=r(8587),d=r(8168),u=r(2004),x=r(8465),h=r(9254),m=r(8463),p=r(1763),g=r(423);function A(e){return(0,g.Ay)("MuiCardActions",e)}(0,p.A)("MuiCardActions",["root","spacing"]);var v=r(4414);const f=["disableSpacing","className"],j=(0,h.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(e=>{let{ownerState:t}=e;return(0,d.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}),y=n.forwardRef(function(e,t){const r=(0,m.b)({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:s}=r,i=(0,l.A)(r,f),a=(0,d.A)({},r,{disableSpacing:n}),o=(e=>{const{classes:t,disableSpacing:r}=e,n={root:["root",!r&&"spacing"]};return(0,x.A)(n,A,t)})(a);return(0,v.jsx)(j,(0,d.A)({className:(0,u.A)(o.root,s),ownerState:a,ref:t},i))});var b=r(8216),w=r(6491),S=r(5277),C=r(1413),z=r(2235),M=r(7191),k=r(5333),_=r(6589),I=r(4857),P=r(2570),E=r(8924),W=r(1718),B=r(9532),F=r(7999),H=r(1328),L=r(1920),N=r(8429),D=r(5887),R=r(5530);const V=()=>{var e;const t=(0,N.Zp)(),r=(0,I.A)(),n=(0,_.A)(r.breakpoints.down("md")),{data:l,isLoading:d,error:u}=(0,L.useQuery)("activeDirectors",()=>R.hV.getActive(),{onError:e=>{var t,r;D.Ay.error("\u83b7\u53d6\u8463\u4e8b\u5217\u8868\u5931\u8d25: "+((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||e.message))}}),x=(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.data)||[],h=e=>{let{director:r}=e;return(0,v.jsx)(M.A,{in:!0,timeout:800,children:(0,v.jsxs)(o.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.3)"}},children:[(0,v.jsxs)(w.A,{sx:{position:"relative",p:n?1.5:2,textAlign:"center"},children:[(0,v.jsx)(C.A,{src:r.avatar_url,sx:{width:n?64:80,height:n?64:80,mx:"auto",mb:n?1.5:2,bgcolor:"primary.main"},children:(0,v.jsx)(P.A,{sx:{fontSize:n?32:40}})}),(0,v.jsx)(S.A,{label:"active"===r.status?"\u6d3b\u8dc3":"\u6682\u505c",size:"small",color:"active"===r.status?"success":"default",sx:{position:"absolute",top:n?6:8,right:n?6:8,fontSize:n?"0.7rem":"0.75rem"}})]}),(0,v.jsxs)(c.A,{sx:{flexGrow:1,pt:0,p:n?1.5:2},children:[(0,v.jsx)(i.A,{variant:n?"subtitle1":"h6",component:"h2",gutterBottom:!0,align:"center",sx:{fontWeight:600,fontSize:n?"1.1rem":"1.25rem"},children:r.name}),(0,v.jsx)(i.A,{variant:"body2",color:"text.secondary",align:"center",gutterBottom:!0,sx:{fontSize:"0.875rem"},children:r.title}),r.expertise_areas&&(0,v.jsxs)(w.A,{sx:{mt:n?1.5:2,display:"flex",flexWrap:"wrap",gap:.5,justifyContent:"center"},children:[("string"===typeof r.expertise_areas?JSON.parse(r.expertise_areas):r.expertise_areas).slice(0,3).map((e,t)=>(0,v.jsx)(S.A,{label:e,size:"small",variant:"outlined",color:"primary",sx:{fontSize:n?"0.7rem":"0.75rem",height:n?24:"auto"}},t)),r.expertise_areas.length>3&&(0,v.jsx)(S.A,{label:"+".concat(r.expertise_areas.length-3),size:"small",variant:"outlined",sx:{fontSize:n?"0.7rem":"0.75rem",height:n?24:"auto"}})]}),(0,v.jsxs)(w.A,{sx:{mt:n?1.5:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,v.jsxs)(w.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,v.jsx)(W.A,{sx:{fontSize:n?14:16,color:"text.secondary"}}),(0,v.jsxs)(i.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:[r.total_statements||0," \u53d1\u8a00"]})]}),(0,v.jsxs)(w.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,v.jsx)(E.A,{sx:{fontSize:n?14:16,color:"text.secondary"}}),(0,v.jsxs)(i.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:[r.total_meetings||0," \u4f1a\u8bae"]})]})]})]}),(0,v.jsxs)(y,{sx:{justifyContent:"space-between",px:n?1.5:2,pb:n?1.5:2,pt:0},children:[(0,v.jsx)(k.A,{size:n?"medium":"small",onClick:()=>t("/directors/edit/".concat(r.id)),title:"\u7f16\u8f91\u8463\u4e8b",sx:{minHeight:n?44:"auto"},children:(0,v.jsx)(F.A,{})}),(0,v.jsx)(b.A,{variant:"contained",size:n?"medium":"small",startIcon:(0,v.jsx)(H.A,{}),onClick:()=>t("/meetings/create"),sx:{minHeight:n?44:"auto",fontSize:n?"0.875rem":"0.8125rem"},children:"\u53d1\u8d77\u8ba8\u8bba"})]})]})})};return u?(0,v.jsx)(s.A,{maxWidth:"lg",sx:{py:4},children:(0,v.jsxs)(z.A,{sx:{p:4,textAlign:"center"},children:[(0,v.jsx)(i.A,{variant:"h6",color:"error",gutterBottom:!0,children:"\u52a0\u8f7d\u5931\u8d25"}),(0,v.jsx)(i.A,{variant:"body2",color:"text.secondary",children:u.message}),(0,v.jsx)(b.A,{variant:"outlined",sx:{mt:2},onClick:()=>window.location.reload(),children:"\u91cd\u65b0\u52a0\u8f7d"})]})}):(0,v.jsxs)(s.A,{maxWidth:"lg",sx:{py:n?2:4},children:[(0,v.jsxs)(w.A,{sx:{textAlign:"center",mb:n?4:6},children:[(0,v.jsx)(i.A,{variant:n?"h4":"h3",component:"h1",gutterBottom:!0,sx:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:"bold"},children:"\u79c1\u4eba\u8463\u4e8b\u4f1a"}),(0,v.jsx)(i.A,{variant:n?"subtitle1":"h6",color:"text.secondary",gutterBottom:!0,children:"\u4e0e\u5386\u53f2\u4eba\u7269\u5171\u5546\u5927\u4e8b"}),(0,v.jsx)(i.A,{variant:n?"body2":"body1",color:"text.secondary",sx:{maxWidth:n?"100%":600,mx:"auto",px:n?2:0},children:"\u5728\u8fd9\u91cc\uff0c\u4f60\u53ef\u4ee5\u9080\u8bf7\u5386\u53f2\u4e0a\u7684\u6709\u8da3\u4eba\u7269\u52a0\u5165\u4f60\u7684\u79c1\u4eba\u8463\u4e8b\u4f1a\uff0c\u5c31\u4efb\u4f55\u95ee\u9898\u8fdb\u884c\u6df1\u5165\u7684\u8ba8\u8bba\u3002"})]}),(0,v.jsxs)(w.A,{sx:{mb:n?3:4},children:[(0,v.jsxs)(w.A,{sx:{display:"flex",flexDirection:n?"column":"row",justifyContent:"space-between",alignItems:n?"stretch":"center",gap:n?2:0,mb:3},children:[(0,v.jsxs)(i.A,{variant:n?"h6":"h5",component:"h2",children:["\u6d3b\u8dc3\u8463\u4e8b (",x.length,")"]}),(0,v.jsx)(b.A,{variant:"contained",startIcon:(0,v.jsx)(B.A,{}),onClick:()=>t("/directors/create"),size:"large",fullWidth:n,sx:{minHeight:n?48:"auto"},children:"\u6dfb\u52a0\u8463\u4e8b"})]}),d?(0,v.jsx)(a.Ay,{container:!0,spacing:n?2:3,children:[...Array(6)].map((e,t)=>(0,v.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,v.jsx)(o.A,{sx:{height:n?250:300},children:(0,v.jsx)(c.A,{children:(0,v.jsxs)(w.A,{sx:{textAlign:"center"},children:[(0,v.jsx)(C.A,{sx:{width:n?60:80,height:n?60:80,mx:"auto",mb:2}}),(0,v.jsx)(i.A,{variant:n?"subtitle1":"h6",children:"\u52a0\u8f7d\u4e2d..."})]})})})},t))}):0===x.length?(0,v.jsxs)(z.A,{sx:{p:n?4:6,textAlign:"center"},children:[(0,v.jsx)(P.A,{sx:{fontSize:n?48:64,color:"text.secondary",mb:2}}),(0,v.jsx)(i.A,{variant:n?"subtitle1":"h6",gutterBottom:!0,children:"\u8fd8\u6ca1\u6709\u8463\u4e8b"}),(0,v.jsx)(i.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"\u5f00\u59cb\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4f4d\u5386\u53f2\u4eba\u7269\u8463\u4e8b\u5427\uff01"}),(0,v.jsx)(b.A,{variant:"contained",startIcon:(0,v.jsx)(B.A,{}),onClick:()=>t("/directors/create"),sx:{mt:2,minHeight:n?48:"auto"},size:n?"large":"medium",fullWidth:n,children:"\u521b\u5efa\u8463\u4e8b"})]}):(0,v.jsx)(a.Ay,{container:!0,spacing:n?2:3,children:x.map(e=>(0,v.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,v.jsx)(h,{director:e})},e.id))})]}),(0,v.jsxs)(z.A,{sx:{p:n?3:4,textAlign:"center",bgcolor:"background.paper"},children:[(0,v.jsx)(i.A,{variant:n?"subtitle1":"h6",gutterBottom:!0,children:"\u5feb\u901f\u5f00\u59cb"}),(0,v.jsxs)(w.A,{sx:{display:"flex",justifyContent:"center",gap:n?1.5:2,flexWrap:"wrap",flexDirection:n?"column":"row"},children:[(0,v.jsx)(b.A,{variant:"outlined",onClick:()=>t("/directors"),size:"large",fullWidth:n,sx:{minHeight:n?48:"auto"},children:"\u7ba1\u7406\u6240\u6709\u8463\u4e8b"}),(0,v.jsx)(b.A,{variant:"outlined",onClick:()=>t("/meetings"),size:"large",fullWidth:n,sx:{minHeight:n?48:"auto"},children:"\u67e5\u770b\u4f1a\u8bae\u5386\u53f2"}),(0,v.jsx)(b.A,{variant:"contained",onClick:()=>{x.length>=1?t("/meetings/create"):D.Ay.error("\u81f3\u5c11\u9700\u89811\u4f4d\u8463\u4e8b\u624d\u80fd\u5f00\u59cb\u4f1a\u8bae")},size:"large",fullWidth:n,sx:{minHeight:n?48:"auto"},children:"\u5f00\u59cb\u65b0\u4f1a\u8bae"})]})]})]})}},1014:(e,t,r)=>{r.d(t,{A:()=>n});const n=r(3539).A},1328:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(9526)),i=r(4414);t.A=(0,s.default)((0,i.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},1718:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(9526)),i=r(4414);t.A=(0,s.default)((0,i.jsx)("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1m-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1"}),"Forum")},2570:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(9526)),i=r(4414);t.A=(0,s.default)((0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},5530:(e,t,r)=>{r.d(t,{ej:()=>i,hV:()=>s});const n=r(6910).A.create({baseURL:"https://dongshihui-api.jieshu2023.workers.dev",timeout:15e3,headers:{"Content-Type":"application/json","Cache-Control":"public, max-age=300"}});n.interceptors.request.use(e=>{var t;return console.log("\ud83d\udd04 API\u8bf7\u6c42: ".concat(null===(t=e.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.url)),e},e=>(console.error("\u274c API\u8bf7\u6c42\u9519\u8bef:",e),Promise.reject(e))),n.interceptors.response.use(e=>(console.log("\u2705 API\u54cd\u5e94: ".concat(e.config.url),e.data),e),e=>{var t,r,n;if(console.error("\u274c API\u54cd\u5e94\u9519\u8bef:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),404===(null===(r=e.response)||void 0===r?void 0:r.status))throw new Error("API\u7aef\u70b9\u4e0d\u5b58\u5728");if(500===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef");if("ECONNREFUSED"===e.code)throw new Error("\u65e0\u6cd5\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u8bf7\u786e\u4fdd\u540e\u7aef\u670d\u52a1\u6b63\u5728\u8fd0\u884c");throw e});const s={getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.get("/directors",{params:e})},getById:e=>n.get("/directors/".concat(e)),create:e=>n.post("/directors",e),update:(e,t)=>n.put("/directors/".concat(e),t),delete:e=>n.delete("/directors/".concat(e)),getActive:()=>n.get("/directors/active/list"),parsePrompt:e=>n.post("/directors/parse-prompt",{system_prompt:e}),createFromPrompt:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.post("/directors/create-from-prompt",{system_prompt:e,avatar_url:t})},getStats:e=>n.get("/directors/".concat(e,"/stats")),batchUpdateStatus:(e,t,r)=>n.patch("/directors/batch-status",{director_ids:e,status:t,is_active:r}),reparseDirector:e=>n.post("/directors/".concat(e,"/reparse"))},i={getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.get("/meetings",{params:e})},create:e=>n.post("/meetings",e),getById:e=>n.get("/meetings/".concat(e)),start:e=>n.post("/meetings/".concat(e,"/start")),pause:e=>n.post("/meetings/".concat(e,"/pause")),finish:e=>n.post("/meetings/".concat(e,"/finish")),resume:e=>n.post("/meetings/".concat(e,"/resume")),generateNextStatement:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.post("/meetings/".concat(e,"/next-statement"),t)},getStatements:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("/meetings/".concat(e,"/statements"),{params:t})},getStats:e=>n.get("/meetings/".concat(e,"/stats")),addParticipants:(e,t)=>n.post("/meetings/".concat(e,"/participants"),t)}},5865:(e,t,r)=>{r.r(t),r.d(t,{capitalize:()=>s.A,createChainedFunction:()=>i.A,createSvgIcon:()=>a.A,debounce:()=>o.A,deprecatedPropType:()=>c,isMuiElement:()=>l.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>x,setRef:()=>h,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>m.A,unstable_useId:()=>p.A,unsupportedProp:()=>g,useControlled:()=>A.A,useEventCallback:()=>v.A,useForkRef:()=>f.A,useIsFocusVisible:()=>j.A});var n=r(4501),s=r(1676),i=r(5920),a=r(3235),o=r(1209);const c=function(e,t){return()=>null};var l=r(3828),d=r(7402),u=r(827);const x=function(e,t){return()=>null};const h=r(5587).A;var m=r(9044),p=r(1014);const g=function(e,t,r,n,s){return null};var A=r(8733),v=r(1976),f=r(1506),j=r(2937);const y={configure:e=>{n.A.configure(e)}}},5920:(e,t,r)=>{r.d(t,{A:()=>n});const n=r(5511).A},6589:(e,t,r)=>{var n;r.d(t,{A:()=>u});var s=r(9950),i=r(1399),a=r(1522),o=r(357);function c(e,t,r,n,a){const[o,c]=s.useState(()=>a&&r?r(e).matches:n?n(e).matches:t);return(0,i.A)(()=>{let t=!0;if(!r)return;const n=r(e),s=()=>{t&&c(n.matches)};return s(),n.addListener(s),()=>{t=!1,n.removeListener(s)}},[e,r]),o}const l=(n||(n=r.t(s,2))).useSyncExternalStore;function d(e,t,r,n,i){const a=s.useCallback(()=>t,[t]),o=s.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(null!==n){const{matches:t}=n(e);return()=>t}return a},[a,e,n,i,r]),[c,d]=s.useMemo(()=>{if(null===r)return[a,()=>()=>{}];const t=r(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]},[a,r,e]);return l(d,c,o)}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,o.A)(),n="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:s=!1,matchMedia:i=(n?window.matchMedia:null),ssrMatchMedia:u=null,noSsr:x=!1}=(0,a.A)({name:"MuiUseMediaQuery",props:t,theme:r});let h="function"===typeof e?e(r):e;h=h.replace(/^@media( ?)/m,"");return(void 0!==l?d:c)(h,s,i,u,x)}},7999:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(9526)),i=r(4414);t.A=(0,s.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8924:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(9526)),i=r(4414);t.A=(0,s.default)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime")},9526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(5865)},9532:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(9526)),i=r(4414);t.A=(0,s.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")}}]);